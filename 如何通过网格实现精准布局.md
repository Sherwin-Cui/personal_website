# 网格定位系统 - AI理解指令

## 核心概念：统一坐标系统

### 1. 坐标原点定义
- **原点位置**：浏览器视口的左上角 (0, 0)
- **坐标方向**：X轴向右为正，Y轴向下为正
- **单位**：所有坐标值均以像素(px)为单位

### 2. 固定画布尺寸规范

#### 标准视口尺寸
```
窗口模式：根据实际浏览器窗口大小
全屏模式：1470 × 919 像素（去掉浏览器刘海后的实际可用区域）
```

**重要**：所有设计和定位都基于 **1470 × 919** 的全屏尺寸进行标准化。此为绝对布局

### 3. 网格系统配置（固定不变）

```javascript
配置参数：
- 页边距：上40px, 右20px, 下20px, 左20px
- 网格布局：4列 × 3行
- 单元格间距：30px
```

#### 网格计算公式
```
容器宽度 = 1470 - 20 - 20 = 1430px
容器高度 = 919 - 40 - 20 = 859px

单元格宽度 = (1430 - 30×3) / 4 = 335px
单元格高度 = (859 - 30×2) / 3 = 266.33px
```

### 4. 吸附点系统

系统会在以下位置自动生成吸附点（交叉点）：

```
吸附点分布：
- 网格线交叉处：5×4 = 20个吸附点
- 吸附半径：10px（鼠标在此范围内会自动对齐）
```

#### 吸附点坐标计算
```javascript
// 示例：第一行吸附点
(20, 40)    - 左上角（边距交点）
(355, 40)   - 第一列右边缘
(720, 40)   - 第二列右边缘
(1085, 40)  - 第三列右边缘
(1450, 40)  - 右边距交点
```

### 5. 定位指令理解规则

当用户说"把元素放在坐标(x, y)"时：

1. **坐标系确认**：所有坐标都基于1470×919的画布
2. **原点确认**：(0,0)在左上角
3. **吸附处理**：如果坐标接近吸附点（±10px），自动对齐到吸附点
4. **边界处理**：确保元素不超出画布边界

### 6. 位置描述转换规则

#### 自然语言转坐标
```
"左上角" → (20, 40)          // 考虑边距
"右上角" → (1450, 40)         // 画布宽度-右边距
"中心点" → (735, 459.5)       // 画布中心
"第2列第3行" → (355, 592.66)  // 具体网格单元
```

#### 相对位置计算
```
"从左边距100px" → x = 20 + 100 = 120
"从顶部200px" → y = 40 + 200 = 240
"居中于第2列" → x = 355 + (335/2) = 522.5
```

### 7. 关键约束条件

1. **画布边界**：任何元素不能超出 0 ≤ x ≤ 1470, 0 ≤ y ≤ 919
2. **内容区域**：实际可放置内容区域为 20 ≤ x ≤ 1450, 40 ≤ y ≤ 899
3. **网格对齐**：优先对齐到网格线和吸附点
4. **坐标精度**：显示时四舍五入到整数，计算时保留小数

### 8. 实际应用示例

#### 示例1：放置一个200×100的矩形
```
用户："把矩形放在第2列第2行的中心"
计算：
- 第2列第2行起始点：(355, 306.33)
- 单元格中心：(355 + 335/2, 306.33 + 266.33/2) = (522.5, 439.495)
- 矩形左上角：(522.5 - 100, 439.495 - 50) = (422.5, 389.495)
- 吸附后：(420, 390) // 吸附到最近的整数坐标
```

#### 示例2：沿网格线排列多个元素
```
用户："沿顶部网格线均匀放置3个圆"
计算：
- 可用宽度：1430px
- 间距：1430 / 4 = 357.5px
- 位置：
  圆1：(20 + 357.5, 40) = (377.5, 40)
  圆2：(20 + 357.5×2, 40) = (735, 40)
  圆3：(20 + 357.5×3, 40) = (1092.5, 40)
```

### 9. 调试验证方法

1. **坐标验证**：鼠标悬停显示实时坐标
2. **吸附验证**：观察坐标是否自动对齐到吸附点
3. **边界验证**：检查元素是否在内容区域内
4. **网格验证**：开启网格显示（按G键）验证对齐

### 10. 重要提醒

⚠️ **所有位置描述都基于1470×919的标准全屏尺寸**
⚠️ **坐标原点始终在左上角(0,0)**
⚠️ **使用吸附系统确保精确对齐**

---

## 快速参考

### 关键坐标点
```
四角坐标：
- 左上内容区：(20, 40)
- 右上内容区：(1450, 40)
- 左下内容区：(20, 899)
- 右下内容区：(1450, 899)

中心坐标：
- 画布中心：(735, 459.5)
- 内容区中心：(735, 469.5)
```

### 网格单元定位
```
grid[row][col] = {
  x: 20 + col * (335 + 30),
  y: 40 + row * (266.33 + 30),
  width: 335,
  height: 266.33
}
```

通过这个指令系统，AI应该能够：
1. 准确理解坐标系统
2. 正确计算任何位置
3. 应用吸附对齐
4. 保证所有元素在同一坐标系下精确定位