// 像素画生成器
window.PixelArt = (function() {
    'use strict';
    
    // 像素画数据（从pixel-art-optimized.html提取）
    const pixelData = {
        "palette": ["#152e3f","#0057a5","#5a7183","#3398fe","#888687","#61aefd","#aeb4c6","#9ec2e8","#fafafa","#fefffe"],
        "indices": [[9,9,9,9,9,9,9,9,8,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,8,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9],[9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9],[9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,8,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9],[9,9,9,9,9,9,9,9,9,8,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,8,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9],[9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,8,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9],[9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,6,3,7,6,9,9,9,8,8,8,8,8,8,9,9,9,9,9,9,9,9,9,9,9,9,9,9],[9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,3,3,3,5,5,5,3,3,3,3,8,9,9,9,9,8,9,9,9,9,9,9,9,9,9,9,9,9,9,9],[9,9,9,9,9,9,9,9,9,9,8,9,9,9,9,9,2,3,5,7,7,5,7,7,5,5,5,5,3,3,3,9,9,9,8,9,9,9,9,9,9,9,9,9,9,9,9,9],[9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,3,3,7,7,7,7,3,3,3,3,5,3,7,7,5,3,3,7,9,8,9,9,9,9,9,9,9,9,9,9,9,9,9],[9,9,9,9,9,9,9,9,9,9,9,9,9,9,3,5,7,7,5,3,3,3,3,3,3,3,1,7,7,7,5,5,3,5,9,9,9,9,9,9,9,9,9,9,9,9,9,9],[8,9,9,9,9,9,9,9,9,9,9,9,9,3,5,7,7,3,3,3,3,3,3,1,1,1,1,3,5,7,7,5,5,3,3,9,9,9,9,9,9,9,9,9,9,9,9,9],[8,8,8,9,9,8,9,9,9,9,9,9,1,5,7,7,7,3,1,1,1,1,1,1,1,1,1,1,5,5,5,3,5,3,3,7,9,9,9,9,9,9,9,9,9,9,9,9],[9,9,8,9,9,9,9,9,9,9,9,6,3,7,7,7,7,3,3,1,1,1,1,1,1,1,1,1,5,7,7,5,5,5,5,3,9,9,9,9,9,9,9,9,9,9,9,9],[9,9,8,8,8,9,8,9,9,8,9,3,3,7,7,7,7,5,5,1,1,1,1,1,0,1,1,3,5,7,7,5,5,3,5,3,7,9,9,9,9,9,9,9,9,9,9,9],[9,9,9,9,9,9,9,9,9,9,9,3,3,5,5,5,5,5,3,1,0,0,1,0,0,0,1,5,7,7,7,5,5,3,3,3,3,9,9,9,9,9,9,9,9,9,9,9],[9,9,9,9,9,9,9,9,9,9,7,3,3,3,3,3,3,7,3,3,1,1,0,1,0,1,1,5,7,7,5,5,5,3,3,3,3,7,9,9,9,9,9,9,9,9,9,9],[9,9,9,9,9,9,9,9,9,9,5,3,3,3,3,3,7,5,5,7,5,3,3,3,2,1,5,5,7,7,3,5,5,3,3,3,3,7,9,9,9,9,9,9,9,9,9,9],[9,9,9,9,9,9,9,9,9,9,5,1,1,3,3,7,7,7,7,7,7,7,7,7,7,7,5,5,7,3,3,7,3,3,3,3,3,7,9,9,9,9,9,9,9,9,9,9],[9,9,9,9,9,9,9,9,9,9,5,1,3,3,3,3,5,3,5,7,7,7,7,7,7,7,7,7,5,3,5,5,5,3,3,3,3,5,8,9,8,9,9,8,8,9,9,9],[9,9,9,9,9,9,9,9,9,9,5,3,3,3,3,3,3,3,3,3,5,5,5,5,5,3,5,5,3,3,3,5,3,3,3,1,3,5,9,9,9,8,8,8,8,9,9,9],[9,8,9,8,9,9,9,9,9,9,7,3,1,1,1,3,3,3,3,3,3,3,3,3,3,3,3,5,5,3,3,3,3,3,3,3,3,7,9,9,9,9,9,9,8,9,9,9],[9,9,9,9,9,9,9,9,8,9,6,3,1,3,1,1,1,1,3,3,1,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,5,7,9,9,9,8,9,9,9,9,9,9],[9,9,9,9,9,9,9,9,9,9,9,5,3,3,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,3,3,3,1,3,3,5,7,9,9,8,9,9,9,9,9,9,9],[9,9,9,9,9,9,9,9,9,9,9,7,3,3,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,3,3,3,3,3,5,7,9,9,9,9,9,9,9,9,9,9],[9,9,9,9,9,9,9,9,9,9,9,7,3,3,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,3,3,3,3,3,5,9,9,9,9,9,9,9,9,9,9,9],[9,9,9,9,9,9,9,9,9,9,9,9,7,3,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,3,3,3,3,3,3,7,9,9,9,8,9,9,9,9,9,9,9],[9,9,9,9,9,9,9,9,9,9,9,9,7,3,3,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,3,3,3,3,3,3,7,9,9,9,9,8,9,9,9,9,9,9],[9,9,9,9,9,9,9,9,9,9,9,9,6,7,5,3,1,1,1,1,1,1,1,1,1,1,1,1,1,1,3,3,3,3,3,5,9,9,9,9,9,9,9,8,9,9,9,9],[9,9,9,9,9,9,9,9,9,9,9,9,9,7,5,3,3,1,1,1,1,1,1,1,1,1,2,3,3,3,3,3,3,3,3,7,9,9,9,9,9,9,9,9,9,8,9,9],[9,9,9,9,9,9,9,9,9,8,9,9,9,9,7,5,3,1,1,1,3,2,1,2,2,2,3,2,3,3,3,3,3,3,3,6,9,9,9,9,9,9,9,9,9,9,9,9],[9,9,9,9,9,9,9,9,9,9,9,9,9,9,6,5,3,3,3,3,3,3,3,3,1,3,3,3,3,3,3,3,3,3,5,6,6,9,9,9,9,9,9,9,9,9,9,8],[9,9,9,9,9,9,9,9,9,9,9,9,9,9,6,3,5,3,3,3,3,3,1,2,2,1,2,1,3,3,3,3,3,3,6,6,6,9,9,9,9,9,9,9,9,9,9,9],[9,9,9,9,9,9,9,9,9,9,9,9,9,9,6,6,6,3,3,3,3,3,3,3,3,2,1,1,1,2,3,2,2,6,6,6,6,6,9,9,9,9,9,9,9,9,9,9],[9,9,9,9,9,9,9,9,9,9,9,9,9,9,6,6,6,2,3,3,3,3,1,1,1,1,1,1,1,1,2,6,6,6,6,6,6,6,9,9,9,9,9,9,9,9,9,8],[9,9,9,9,9,9,9,9,9,9,9,9,9,9,6,6,6,6,2,2,2,2,1,1,1,1,1,1,2,2,6,6,6,6,6,6,6,6,8,9,8,9,9,8,8,9,8,8],[9,9,9,9,9,9,9,9,9,9,9,9,9,9,6,6,6,6,6,2,2,2,1,2,2,2,2,2,4,6,6,6,6,6,6,6,6,6,9,8,9,9,9,9,9,9,8,8],[9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,6,6,6,6,6,4,2,2,2,4,4,6,6,6,6,6,6,6,6,6,6,9,9,9,9,9,9,9,9,9,9,9],[9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,9,9,9,9,9,9,9,9,9,9,9],[9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,9,9,9,9,9,9,9,9,9,9,9,9],[9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,9,9,9,9,9,9,9,9,9,9,9,9],[9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,9,9,9,9,9,9,9,9,9,9,9,9,9],[9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,6,6,6,6,6,6,6,6,6,6,6,6,6,6,9,9,9,9,9,9,9,9,9,9,9,9,9],[9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,6,6,6,6,6,6,6,6,6,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9],[9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,6,6,6,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9],[9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9],[9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9],[9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9],[9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,8,8,8,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9]]
    };
    
    // 初始化像素画
    function init() {
        const grid = document.getElementById('pixelArtGrid');
        if (!grid) {
            console.error('[PixelArt] 找不到像素画容器');
            return;
        }
        
        // 清空容器
        grid.innerHTML = '';
        
        // 生成像素点
        pixelData.indices.forEach(row => {
            row.forEach(colorIndex => {
                const pixel = document.createElement('div');
                pixel.className = 'pixel-dot';
                
                // 判断是否为背景色（索引8和9通常是接近白色的背景）
                if (colorIndex === 8 || colorIndex === 9) {
                    pixel.classList.add('pixel-transparent');
                } else {
                    pixel.classList.add(`pixel-c${colorIndex}`);
                }
                
                grid.appendChild(pixel);
            });
        });
        
        console.log('[PixelArt] 像素画生成完成');
    }
    
    // 公开API
    return {
        init
    };
})();

// 自动初始化
document.addEventListener('DOMContentLoaded', () => {
    setTimeout(() => {
        console.log('[PixelArt] 初始化像素画');
        window.PixelArt.init();
    }, 100);
});